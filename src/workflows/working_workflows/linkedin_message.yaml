name: LinkedIn Messaging Automation
description: Automate sending messages on LinkedIn given the contact name and message.
inputs:
  type: object
  properties:
    contact_name:
      type: string
      description: Name of the contact to message on LinkedIn
    message:
      type: string
      description: Message to send to the contact
  required:
    - contact_name
    - message
steps:
  - type: deterministic
    description: Open LinkedIn in a new tab
    action: open_tab
    params:
      url: "https://www.linkedin.com/"
  - type: deterministic
    description: Wait for LinkedIn to load
    action: wait_for_url
    params:
      url: "https://www.linkedin.com/feed/"
  - type: deterministic
    description: Click on the Messaging icon
    action: click_element_by_css_selector
    params:
      selector: "span.t-12.break-words.block.t-black--light.t-normal.global-nav__primary-link-text[title=\"Messaging\"]"
  - type: deterministic
    description: Wait for the messaging page to load
    action: wait_for_url
    params:
      url: "https://www.linkedin.com/messaging/*"
  - type: deterministic
    description: Click on the search conversations input
    action: click_element_by_css_selector
    params:
      selector: "input.ember-text-field.ember-view.msg-cross-pillar-search-form__search-field.t-14.t-black.t-normal[id=\"search-conversations\"]"
  - type: agent
    description: Search for the contact by name
    task: Input the contact name {contact_name} in the search field and press Enter
    max_steps: 5
  - type: deterministic
    description: Click on the conversation with the contact
    action: click_element_by_css_selector
    params:
      selector: "div.msg-conversation-card__message-snippet-container.flex-grow-1"
  - type: deterministic
    description: Input the message in the message box
    action: input_text_by_css_selector
    params:
      selector: "div.msg-form__contenteditable.t-14.t-black--light.t-normal.flex-grow-1"
      text: "{message}"
  - type: deterministic
    description: Click the Send button
    action: click_element_by_css_selector
    params:
      selector: "button.msg-form__send-button.artdeco-button.artdeco-button--1[type=\"submit\"]"
  - type: deterministic
    description: Confirm message sent
    action: done
    params:
      text: "Message sent successfully"
      success: true