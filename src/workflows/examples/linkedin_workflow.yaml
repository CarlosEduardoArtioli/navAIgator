name: LinkedIn Send Message
description: Logs into LinkedIn, navigates to messaging, and sends a message to a specified recipient.
inputs:
  type: object
  properties:
    email:
      description: LinkedIn login email.
      type: string
    password:
      description: LinkedIn login password.
      type: string
      sensitive: true
    recipient:
      description: Name of the recipient.
      type: string
    message:
      description: The message content to send.
      type: string
  required:
    - email
    - password
    - recipient
    - message

steps:
  - type: deterministic
    action: go_to_url
    description: Navigate to LinkedIn
    params:
      url: "https://www.linkedin.com/"

  - type: deterministic
    action: click_element_by_css_selector
    description: Click on the sign in button
    params:
      selector: '[data-test-id="home-hero-sign-in-cta"]'

  - type: deterministic
    action: fill_element_by_role
    description: Fill in the email or phone field
    params:
      role: textbox
      name: 'Email or phone'
      value: "{email}"

  - type: deterministic
    action: fill_element_by_role
    description: Fill in the password field
    params:
      role: textbox
      name: 'Password'
      value: "{password}"

  - type: deterministic
    action: click_element_by_role
    description: Click on the sign in button
    params:
      role: button
      name: 'Sign in'
      exact: true

  - type: deterministic
    action: wait_for_url
    description: Wait for the feed page to load
    params:
      url: "https://www.linkedin.com/feed/"

  - type: deterministic
    action: click_element_by_role
    description: Click on the messaging link
    params:
      role: link
      name: 'Messaging'

  - type: deterministic
    action: click_element_by_role
    description: Click on the compose a new message button
    params:
      role: button
      name: 'Compose a new message'

  - type: deterministic
    action: fill_element_by_role
    description: Fill in the recipient field
    params:
      role: combobox
      name: 'Enter message recipients'
      value: "{recipient}"

  - type: agent
    description: Click on the button or list item corresponding to the recipient profile for {recipient} that appears after typing their name.
    task: "Click on the button or list item corresponding to the recipient profile for {recipient} that appears after typing their name."
    max_steps: 3

  - type: deterministic
    action: click_element_by_role
    description: Click on the message textbox
    params:
      role: textbox
      name: 'Write a message…'

  - type: deterministic
    action: fill_element_by_role
    description: Fill in the message textbox
    params:
      role: textbox
      name: 'Write a message…'
      value: "{message}"

  - type: deterministic
    action: click_element_by_role
    description: Click on the send button
    params:
      role: button
      name: 'Send'
      exact: true 