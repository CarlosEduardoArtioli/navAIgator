name: Send Slack Message
description: Workflow to send a message to a person on Slack using browser automation.
inputs:
  type: object
  properties:
    person_name:
      type: string
      title: Name of the person to message
    message_text:
      type: string
      title: Text of the message to send
  required:
    - person_name
    - message_text
steps:
  - type: deterministic
    description: Open Slack in a new tab
    action: open_tab
    params:
      url: "https://slack.com/"
  - type: deterministic
    description: Click on 'Launch Slack' to open the Slack app
    action: click_element_by_css_selector
    params:
      selector: "span.p-workspaces_list__link_icon_text"
  - type: deterministic
    description: Click on the person's name to open the chat
    action: click_element_by_css_selector
    params:
      selector: "span:contains({input.person_name})"
  - type: deterministic
    description: Input the message text
    action: input_text_by_css_selector
    params:
      selector: "p"
      text: "{input.message_text}"
  - type: deterministic
    description: Send the message
    action: click_element_by_css_selector
    params:
      selector: "button.c-button-unstyled.c-icon_button.c-icon_button--size_x-small.c-wysiwyg_container__button.c-wysiwyg_container__button--send.c-icon_button--default[data-qa=\"texty_send_button\"][aria-label*=\"Send now\"][type=\"button\"]"
  - type: deterministic
    description: Confirm message sent
    action: done
    params:
      text: "Message sent successfully"
      success: true